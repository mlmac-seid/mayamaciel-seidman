function sanitizeForId(t){return t.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"-").toLowerCase()}(function(t){let u=t(".menu-container"),h=t("#primary-menu-toggle"),f=u.find("#primary-menu"),g=t("#primary-menu > ul > li.menu-item-has-children");function c(){f.toggleClass("hidden");let e=h.attr("aria-expanded")==="false"?"true":"false";h.attr("aria-expanded",e)}function s(e,a){a?(e.find("> ul.sub-menu").addClass("toggled-on"),e.find("> button.dropdown-toggle").addClass("toggled-on"),e.find("> button.dropdown-toggle").attr("aria-expanded","true")):(e.find("> ul.sub-menu").removeClass("toggled-on"),e.find("> button.dropdown-toggle").removeClass("toggled-on"),e.find("> button.dropdown-toggle").attr("aria-expanded","false"))}h.on("click",function(){c()}),g.each(function(){let e=t(this).width(),a=e;t(this).find("ul.sub-menu").each(function(p){t(this).addClass("toggled-on");let o=t(this).width();o>440&&t(this).find(".menu-item a").css("white-space","initial"),o>e&&(a=o);let r=t(this).offset().left,l=u.width();if(o+r>l){let d=t("#primary-menu").offset().left,i=t("#primary-menu").width(),b=d+i-r,w=o-b|0;t(this).css("left","-"+w+"px")}}),t(this).find("ul.sub-menu").css("width",a),t(this).find("ul.sub-menu").each(function(){t(this).removeClass("toggled-on")})}),t(".menu-item-has-children > a").each(function(e){let a="Toggle "+t(this).html()+" Sub Menu",p=sanitizeForId(t(this).html())+"-"+e,o=t("<button />",{class:"dropdown-toggle","aria-expanded":!1,"aria-label":a,"aria-controls":p});t(this).next("ul.sub-menu").attr("id",p),t(this).after(o),t(this).parents(".sidebar").length>0&&(t(this).parents(".current-page-parent").length>0||t(this).parents(".current_page_item").length>0)&&s(t(this).parent(),!0)}),g.on("mouseenter",function(){s(t(this),!0)}).on("mouseleave",function(){s(t(this),!1)}),t(".menu-item-has-children").attr("aria-haspopup","true"),t("button.dropdown-toggle").click(function(e){e.preventDefault(),s(t(this).parent(),!t(this).hasClass("toggled-on"))}),t(".dropdown-toggle, .primary-menu-toggle").keyup(function(e){e.key==="Escape"&&(t(".dropdown-toggle").not(this).each(function(){s(t(this).parent(),!1)}),e.preventDefault(),s(t(this).parent(),!t(this).hasClass("toggled-on")))}),g.each(function(){t(this).find("a").each(function(){let e=t(this);if(e.attr("href")===void 0){let a=t("<span>").append(e.contents());e.replaceWith(a)}})}),t(".menu-item a, .menu-item span, button.dropdown-toggle").on("keydown",function(e){if([37,38,39,40,13].indexOf(e.keyCode)!==-1)switch(e.keyCode){case 13:if(e.preventDefault(),t(this).hasClass("dropdown-toggle")){let i=t(this);s(t(this).parent(),!t(this).hasClass("toggled-on")),t("#primary-menu > ul > li > .dropdown-toggle").each(function(){!i.is(t(this))&&!i.parents().hasClass("toggled-on")&&s(t(this).parent(),!1)})}else window.location.href=t(this).attr("href");break;case 37:let o=function(i){let n=i.prev("button.dropdown-toggle, a");for(n.length<1&&(n=i.parent().prev().children("a:last, button.dropdown-toggle:last"));n.length;){if(n.is("button.dropdown-toggle, a"))return n;if(n.is("span"))n=n.prev();else break}return i.parent().prev().children("a:last, button.dropdown-toggle:last")};var a=o;e.preventDefault(),e.stopPropagation();let r=o(t(this));r.length&&r.focus();break;case 39:let l=function(i){let n=i.next("button.dropdown-toggle, a");for(n.length<1&&(n=i.parent().next().children("a:first, button.dropdown-toggle:first"));n.length;){if(n.is("button.dropdown-toggle, a"))return n.first();if(n.is("span"))n=n.next();else break}return i.parent().next().children("a:first, button.dropdown-toggle:first")};var p=l;e.preventDefault(),e.stopPropagation();let d=l(t(this));d.length&&d.focus();break;case 40:e.preventDefault(),e.stopPropagation(),t(this).next().length?t(this).next().find("li:first-child a").first().focus():t(this).parent().next().children("a").focus(),t(this).is("ul.sub-menu a")&&t(this).next("button.dropdown-toggle").length&&t(this).parent().next().children("a").focus(),t(this).is("ul.sub-menu .dropdown-toggle")&&t(this).parent().next().children(".dropdown-toggle").length&&t(this).parent().next().children(".dropdown-toggle").focus();break;case 38:e.preventDefault(),e.stopPropagation(),t(this).parent().prev().length?t(this).parent().prev().children("a").focus():t(this).parents("ul").first().prev(".dropdown-toggle.toggled-on").focus(),t(this).is("ul.sub-menu .dropdown-toggle")&&t(this).parent().prev().children(".dropdown-toggle").length&&t(this).parent().prev().children(".dropdown-toggle").focus();break}})})(jQuery);
